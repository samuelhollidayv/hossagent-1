You are the engineering agent for HossAgent, and the system is now in a state where multiple components are partially upgraded, partially broken, and no longer aligned with the intended product behavior.

Your task is to perform a COMPLETE STABILIZATION + REBUILD PASS on the entire platform‚Äînot adding new features, but fixing, re-wiring, aligning, and simplifying what already exists.

This BRD describes exactly what must be corrected, preserved, removed, and rebuilt. You must follow it with precision, documenting assumptions inline.

==========================
üî• PART I ‚Äî CORE OBJECTIVE
==========================
Restore HossAgent into a functional, simplified, clean, end-to-end system that:

1. Accepts Signals
2. Converts them into LeadEvents
3. Extracts real contact info
4. Enriches missing details
5. Sends OUTBOUND emails TO LEADS (not customers)
6. CCs the customer
7. Records everything in Conversations
8. Displays everything in the Customer Portal
9. Shows clear, actionable tables in Admin Console
10. NO dummy data, NO dead tables, NO zombie logic

This is a system STABILIZATION + COHERENCE mission.

==========================
üî• PART II ‚Äî WHAT IS BROKEN
==========================

A. OUTBOUND EMAIL LOGIC
‚Ä¢ System currently emails the CUSTOMER instead of the LEAD.
‚Ä¢ LeadEvents often lack emails because Signal extraction wasn‚Äôt plumbed through earlier.
‚Ä¢ CC and Reply-To logic misdirected.
‚Ä¢ Outbound copy references THE CUSTOMER as the subject (wrong).
‚Ä¢ Needs full rewrite.

B. SIGNAL ‚Üí LEADEVENT PIPELINE
‚Ä¢ Some signal sources improved, others still stubbed.
‚Ä¢ Contact info extracted at source but not consistently passed to LeadEvent.
‚Ä¢ Some events still missing domain/email.
‚Ä¢ Enrichment pipeline still assumes domain-first.

C. CUSTOMER PORTAL
‚Ä¢ Outbound messages do NOT show up.
‚Ä¢ Conversations NOT displayed.
‚Ä¢ LeadEvents NOT clickable.
‚Ä¢ No visibility on:
  ‚Äì Outbound attempts
  ‚Äì Drafts
  ‚Äì Replies
  ‚Äì Reports
‚Ä¢ Tables are empty or misleading.

D. ADMIN CONSOLE
‚Ä¢ Tables are duplicative, inconsistent, and non-clickable.
‚Ä¢ Needs consolidation:
  ‚Äì Signals
  ‚Äì LeadEvents
  ‚Äì Outbound Messages
  ‚Äì Customers
‚Ä¢ Must remove deprecated tables (dummy seed, placeholder templates, etc.).

E. FRONTEND UX REGRESSION
‚Ä¢ After multiple iterations, layout and styles drifted.
‚Ä¢ Operator console appears on wrong pages, wrong locations.
‚Ä¢ Customer portal looks empty even when data exists.

F. EMAIL SENDING INFRASTRUCTURE
‚Ä¢ SendGrid is throttling at 100/day.
‚Ä¢ We need outbound to switch to Amazon SES (SMTP or API) for unlimited sending.
‚Ä¢ MUST NOT BREAK inbound parse (still SendGrid for now).

==========================
üî• PART III ‚Äî THE REQUIRED FIXES
==========================

You must implement the following in order:

--------------------------------------
1. OUTBOUND PIPELINE ‚Äî CORRECTION
--------------------------------------
Rewrite outbound logic so that:

TO: lead_email  
CC: customer.email  
REPLY-TO: customer.email  
FROM: hello@hossagent.net  

And ensure:
‚Ä¢ Outbound references the LEAD + SIGNAL context.
‚Ä¢ NEVER email the customer directly except for notifications.
‚Ä¢ No outbound for signals about the customer‚Äôs own business.

--------------------------------------
2. SIGNAL ‚Üí LEADEVENT PIPELINE
--------------------------------------
‚Ä¢ Use extracted_contact_info from Signal to populate:
  ‚Äì lead_email
  ‚Äì lead_domain
  ‚Äì lead_phone
‚Ä¢ If email exists: enrichment = DONE
‚Ä¢ If domain exists: scrape via enrichment
‚Ä¢ If neither: fall back to Apollo (if integrated)
Fix all serialization, null defaults, and DB schema mismatches.

--------------------------------------
3. CONVERSATION ENGINE (v0)
--------------------------------------
Implement:
‚Ä¢ messages table
‚Ä¢ threads table
‚Ä¢ inbound storage (existing SendGrid inbound webhook)
‚Ä¢ outbound storage mapping to threads

Customer Portal must show:
‚Ä¢ All emails sent to leads
‚Ä¢ All replies from leads
‚Ä¢ Status: sent, delivered (if SES), replied

--------------------------------------
4. CUSTOMER PORTAL CLEANUP
--------------------------------------
Rebuild portal sections:

A. ‚ÄúToday‚Äôs Opportunities‚Äù
‚Ä¢ List LeadEvents with:
  ‚Äì Summary
  ‚Äì Score
  ‚Äì Category
  ‚Äì Timestamp
  ‚Äì Status
‚Ä¢ Clicking an event loads full context panel.

B. ‚ÄúConversations‚Äù
‚Ä¢ Show threads with lead name + status.
‚Ä¢ Show all messages inside.

C. ‚ÄúOutbound Activity‚Äù
‚Ä¢ Table of all outbound emails sent to leads.

D. ‚ÄúReports / Work Completed‚Äù
‚Ä¢ Show any generated PDF/text reports.
‚Ä¢ Each clickable.

--------------------------------------
5. ADMIN CONSOLE ‚Äî CONSOLIDATION
--------------------------------------
Remove:
‚Ä¢ Email Health
‚Ä¢ Dummy Seed
‚Ä¢ BizDev Template stubs
‚Ä¢ Historical ‚Äúdraft invoices‚Äù

Replace with 4 clean tables:

1. Signals  
2. LeadEvents  
3. OutboundMessages  
4. Customers  

Each row must be clickable ‚Üí detail panel.

--------------------------------------
6. REMOVE ALL DUMMY DATA
--------------------------------------
Delete:
‚Ä¢ DummySeed logic  
‚Ä¢ Placeholder leads  
‚Ä¢ Fake tasks  
‚Ä¢ Fake reports  

--------------------------------------
7. AMAZON SES INTEGRATION
--------------------------------------
Replace SendGrid outbound with SES:

Environment variables:
  AWS_SES_ACCESS_KEY
  AWS_SES_SECRET_KEY
  AWS_SES_REGION
  FROM_EMAIL = hello@hossagent.net

Add:
EMAIL_MODE = DRY_RUN | LIVE

--------------------------------------
8. STABILIZE AUTOPILOT LOOP
--------------------------------------
Ensure Autopilot:
‚Ä¢ Fetches signals
‚Ä¢ Creates LeadEvents
‚Ä¢ Enriches
‚Ä¢ Sends outbound (LIVE mode)
‚Ä¢ Logs replies
‚Ä¢ Updates LeadEvent status correctly

--------------------------------------
9. VERIFICATION / TESTS
--------------------------------------
Once fixed, run:
‚Ä¢ One fake Signal with contact info
‚Ä¢ Expect: LeadEvent created with email
‚Ä¢ Expect: Outbound email sent to LEAD (not customer)
‚Ä¢ Expect: Customer CC‚Äôd
‚Ä¢ Expect: Lead reply ‚Üí appears in Conversations
‚Ä¢ Expect: No UI errors in Portal or Admin

--------------------------------------
10. DOCUMENT EVERYTHING
--------------------------------------
Update:
‚Ä¢ replit.md
‚Ä¢ comments in code
‚Ä¢ any config instructions

==========================
üî• PART IV ‚Äî TONE + EXECUTION
==========================
You are not cleaning clutter.  
You are stabilizing a multi-agent, multi-pipeline growth engine.

You must:
‚Ä¢ Refactor carefully
‚Ä¢ Remove dead code
‚Ä¢ Avoid breaking existing working subsystems
‚Ä¢ Keep the architecture coherent
‚Ä¢ Maintain clarity for future expansion

==========================
üî• PART V ‚Äî DELIVERABLES
==========================
When finished, return:
1. Summary of all changes made  
2. Confirmation tests passed  
3. Instructions for me (the human Hoss) to test in prod  
4. Any next steps you recommend  